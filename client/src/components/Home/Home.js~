import React, { useState, useEffect } from "react";
import { useContextSelector } from "use-context-selector";
import Context from "../../context/Context";
import ShowUsers from "./ShowUsers";

export default function Home() {

	const username = useContextSelector(Context, item => item.username)
	const socket = useContextSelector(Context, item => item.socket)
	const [ allusers, setAllusers ] = useState([{ id: socket.id, username: username }])
	
	useEffect(() => {
		socket.on("send_users", (users) => {
			setAllusers(users)
		})
	}, [])

    return (
        <>
			<ShowUsers allusers={allusers} />
		</>
    );
}
